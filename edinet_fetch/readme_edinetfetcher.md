# 📄 EDINETFetcher - EDINET API連携・企業財務データ収集モジュール

このモジュールは、金融庁が提供するEDINET（Electronic Disclosure for Investors' NETwork）APIから企業の四半期・本決算データを自動取得し、ローカルにキャッシュ保存する仕組みを提供します。

主に、**機械学習や株価分析の前処理としての企業業績データの安定収集・整備**を目的としています。

---

## ✅ 特徴（アピールポイント）

- **EDINET API への自動アクセスに対応**

  - ダウンロード対象の提出書類をフィルタリング（四半期報告書、有価証券報告書）
  - APIキーやユーザーIDなどは外部設定または環境変数に対応し、セキュアに扱える設計

- **キャッシュ保存による高速化と帯域節約**

  - 一度取得したXBRLデータやメタ情報をローカルに保存し、再利用
  - 既存ファイルがある場合は再ダウンロードをスキップ

- **J-QUANTS APIより複雑なEDINET構造への対応**

  - 書類ごとのレイアウトやキー（タグ）が異なるXBRLに対応するため、複雑なタグ探索処理を実装
  - EDINET固有の"難解さ"に正面から取り組んだ実務的なコード

- **複数企業の一括処理・定期収集が可能**

  - 任意の企業リストや期間に基づく定期収集ループ処理も簡単に構築可能

---

## 📦 使用方法の一例

```python
from edinet_fetcher import EdinetFetcher

fetcher = EdinetFetcher(cache_dir="./edinet_cache")
fetcher.download_if_needed(company_code="7203", year=2024, quarter=1)
```

---

## 📁 入出力仕様

- **入力：** EDINET提出企業コード（例：7203）、対象年・四半期など
- **出力：**
  - ローカル保存されたZIP・XBRLファイル
  - 解析済みのデータフレーム（例：売上、営業利益、ROE等）

---

## 🔍 補足

> EDINETはJ-QUANTSと異なり、**提出フォーマットが非統一かつ、キーのタグが企業や時期ごとに異なる**という課題があります。 本モジュールでは、そのようなバラつきにも耐えられるよう、タグ辞書やキーリストを柔軟に適用して処理しています。

また、企業の決算情報を時系列に並べ、機械学習モデルの教師データとして整える前処理にも適しています。

---

## 📚 ライセンスと注意

このコードは、実務で使用されたEDINETデータ取得ロジックの簡略版であり、公開用に機密情報（APIキーなど）を除いた状態で整形されています。

再利用・参考にする際は、**EDINET APIの使用規約**に従い、適切に利用してください。

