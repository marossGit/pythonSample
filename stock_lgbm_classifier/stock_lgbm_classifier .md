# LightGBM 株価予測モデル

このプログラムは、日本株式市場における「5ヶ月後に株価が上昇するかどうか」をLightGBM分類モデルを使って予測するシステムです。

---

## モデル概要

- **目的**: 5ヶ月後に株価が上昇している確率を予測
- **モデル**: LightGBM (LGBMClassifier)
- **分類**: 上昇 (1) / 非上昇 (0)
- **特徴量**: 財務、チャート、需給などの9項目
- **機能**:
  - 訓練データの生成 (`create_training_data`)
  - モデル訓練と評価 (`train_model`)
  - 上昇確率の予測 (`predict_proba`)
  - Precision重視の分析評価 (`evaluate_model_performance`)

---

## 特徴量内訳（全9項目）

| 項目           | 概要                     |
|----------------|--------------------------|
| 資産と資本     | B/S の安定性             |
| 売上と営業利益 | 営業戦略の効率           |
| キャッシュフロー | 現金や流動性             |
| 理論株価       | 理論価格との乖離         |
| ROEの詳細      | 本業の利益率             |
| 四十四分析     | 最新四半期のスコア計算   |
| 非常値ベータ   | 日経平均との相関指標     |
| 出来高         | 流動性・活発度           |
| 需給           | 市場の売買バランス       |

---

## 分析機能ハイライト

### `evaluate_model_performance()`
- F0.5 スコア（Precision重視）の最適なしきい値を探索
- モデルの実運用精度を高める閾値最適化
- 出力例：

```text
🎯 最適なしきい値 (F0.5最大): 0.56 (F0.5: 0.742)
Precision: 0.812
```

---

## 出力例（`train_model()` 実行時）

```text
✅ モデル評価
Accuracy: 0.742
AUC: 0.793
Confusion Matrix:
[[120  23]
 [ 34  90]]

--- 特徴量重要度 ---
資産と資本: 32
売上と営業利益: 65
...
```

---

## 使用条件

- `baseDeck` / `futureDeck` は独自構造の株式データオブジェクトを前提
- `evalPerform`, `evalChart`, `evalSupply` などの前処理が必要
- LightGBMは高速かつ高精度な学習・予測が可能

---

## 注意

- 本コードはポートフォリオ参考用・個人開発プロジェクトにおける分析事例です
- 精度や適用性は使用するデータに大きく依存します
- 実運用の際は投資判断を含む注意が必要です

---

© 2025 Maro / ChatGPT with GPT-4
